---
layout: layouts/session.html
title: Stata Session 1 | 14.33
current_page: session1
---
<h1>Stata Session 1</h1>
<p class="subtitle">Your first steps with data: setup, organization, exploring, and importing</p>

<div class="learning-objectives">
  <h4>What You'll Learn</h4>
  <ul>
    <li>How to set up a research project with proper folder structure</li>
    <li>How to explore a dataset you've never seen before</li>
    <li>How to select the observations and variables you need</li>
    <li>How to create new variables from existing ones</li>
    <li>How to import data from CSV files</li>
  </ul>
</div>

<div style="background: #f8f9fa; border: 1px solid var(--border); border-radius: 8px; padding: 16px 20px; margin: 20px 0;">
  <h4 style="margin: 0 0 12px; font-size: 0.95rem;">Download Complete Scripts</h4>
  <p style="margin: 0 0 12px; font-size: 0.9rem; color: #666;">Run the full session code in your preferred language:</p>
  <div style="display: flex; gap: 12px; flex-wrap: wrap;">
    <a href="../scripts/session1/session1.do" download style="display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: #1a5f8a; color: white; border-radius: 6px; text-decoration: none; font-size: 0.85rem; font-weight: 500;">
      <span>Stata</span> <span style="opacity: 0.7;">.do</span>
    </a>
    <a href="../scripts/session1/session1.R" download style="display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: #276dc3; color: white; border-radius: 6px; text-decoration: none; font-size: 0.85rem; font-weight: 500;">
      <span>R</span> <span style="opacity: 0.7;">.R</span>
    </a>
    <a href="../scripts/session1/session1.py" download style="display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: #3776ab; color: white; border-radius: 6px; text-decoration: none; font-size: 0.85rem; font-weight: 500;">
      <span>Python</span> <span style="opacity: 0.7;">.py</span>
    </a>
  </div>
</div>

<div style="background: #e8f5e9; border-left: 4px solid #4caf50; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
  <strong>A note before we start:</strong> Learning to code is like learning a new language‚Äîit takes practice, and everyone makes mistakes. If something doesn't work, that's normal! Read error messages carefully, check for typos, and remember that debugging is a core skill, not a sign you're doing something wrong.
</div>

<!-- ============================================================== -->
<section id="module1" class="tutorial-section">
  <h2>Module 1: Introduction to Stata</h2>

  <p>Imagine you just got a new dataset. Before doing any analysis, you need to <strong>understand what you have</strong>. How many observations? What variables? What do they look like? This module teaches you how to answer these questions.</p>

  <h3 id="setup">Step 1: Setting Up Your Script</h3>

  <p>Every Stata do-file should start the same way. Think of this as "clearing the stage" before your performance:</p>

  <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
    <strong>ü§î Before running this code, predict:</strong> What does <code>clear all</code> do? Why might we want to close any open log file before starting?
  </div>

  <div class="code-block">
    <div class="code-header">
      <div class="code-tabs">
        <button class="code-tab active" data-lang="stata">Stata</button>
        <button class="code-tab" data-lang="r">R</button>
        <button class="code-tab" data-lang="python">Python</button>
      </div>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <pre class="code-content stata active"><code class="language-stata">* ========================================
* SETUP - Run this at the start of every script
* ========================================

* Step 1: Clear everything from memory
* (This ensures you're starting fresh, not using old data)
clear all

* Step 2: Close any open log file
* (capture means "try this, but don't error if it fails")
capture log close

* Step 3: Don't pause after each screenful of output
set more off

* Step 4: Set your working directory
* IMPORTANT: Change this path to YOUR project folder!
* To find your path: On Mac, right-click your project folder in Finder
* ‚Üí 'Get Info' ‚Üí copy the path next to 'Where'.
* On Windows, open the folder in Explorer ‚Üí click the address bar ‚Üí copy.
* Use forward slashes (/) in Stata even on Windows.
cd "/Users/yourname/Dropbox/my_project"

* Step 5: Start a log file (records everything you do)
* "replace" overwrites the old log if it exists
log using my_analysis.log, replace</code></pre>
    <pre class="code-content r"><code class="language-r"># ========================================
# SETUP - Run this at the start of every script
# ========================================

# Step 1: Clear environment (remove all objects)
rm(list = ls())

# Step 2: Set working directory
# IMPORTANT: Change this path to YOUR project folder!
setwd("/Users/yourname/Dropbox/my_project")

# Step 3: Load required packages
pacman::p_load(tidyverse, haven)</code></pre>
    <pre class="code-content python"><code class="language-python"># ========================================
# SETUP - Run this at the start of every script
# ========================================

# Step 1: Import required packages
import pandas as pd
import numpy as np
import os

# Step 2: Set working directory
# IMPORTANT: Change this path to YOUR project folder!
os.chdir("/Users/yourname/Dropbox/my_project")</code></pre>
  </div>

  <div class="key-principle">
    <h4>Why This Matters</h4>
    <p>Starting fresh (<code>clear all</code>) prevents a common bug: accidentally using variables from a previous session. The log file creates a record of everything you did‚Äîinvaluable when you need to remember your steps months later or when something goes wrong.</p>
  </div>

  <h3 id="browsing">Step 2: First Look at Your Data</h3>

  <p>You've downloaded a dataset. Now what? Let's say it's Census data with information about people. Before diving into analysis, answer these questions:</p>

  <ul>
    <li><strong>How many observations?</strong> (Are there 100 people? 1 million?)</li>
    <li><strong>What variables exist?</strong> (Income? Age? Education?)</li>
    <li><strong>What do the values look like?</strong> (Is age in years? Months? Categories?)</li>
  </ul>

  <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
    <strong>ü§î Predict:</strong> If you have a variable called <code>sex</code> with values 1 and 2, what might those numbers mean? How would you find out?
  </div>

  <div class="code-block">
    <div class="code-header">
      <div class="code-tabs">
        <button class="code-tab active" data-lang="stata">Stata</button>
        <button class="code-tab" data-lang="r">R</button>
        <button class="code-tab" data-lang="python">Python</button>
      </div>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <pre class="code-content stata active"><code class="language-stata">* Load the data
use mydata.dta, clear

* ----- EXPLORATION COMMANDS -----

* browse: Opens a spreadsheet view
* USE THIS FIRST to see what your data looks like
browse

* describe: Shows variable names, types, and labels
* This tells you WHAT variables you have
describe

* summarize: Shows mean, sd, min, max for numeric variables
* This tells you the RANGE of your data
summarize

* summarize specific variables
summarize age income

* summarize with detail: adds percentiles
* Useful for seeing the full distribution
summarize income, detail

* tabulate: Counts observations by category
* ESSENTIAL for categorical variables
tabulate sex

* See the numeric codes behind the labels
tabulate sex, nolabel</code></pre>
    <pre class="code-content r"><code class="language-r"># Load the data
df <- read_dta("mydata.dta")

# ----- EXPLORATION COMMANDS -----

# View(): Opens a spreadsheet view
# USE THIS FIRST to see what your data looks like
View(df)

# glimpse(): Shows variable names and types
# This tells you WHAT variables you have
glimpse(df)

# summary(): Shows summary stats for all variables
summary(df)

# Summary for specific variables
summary(df$age)
summary(df$income)

# Detailed summary with percentiles
pacman::p_load(psych)
describe(df$income)

# table(): Counts observations by category
# ESSENTIAL for categorical variables
table(df$sex)

# With percentages
prop.table(table(df$sex))</code></pre>
    <pre class="code-content python"><code class="language-python"># Load the data
df = pd.read_stata("mydata.dta")

# ----- EXPLORATION COMMANDS -----

# head(): Shows first few rows
# USE THIS FIRST to see what your data looks like
df.head(10)

# info(): Shows variable names and types
# This tells you WHAT variables you have
df.info()

# describe(): Shows summary stats for numeric variables
df.describe()

# Summary for specific variables
df[['age', 'income']].describe()

# Detailed summary with percentiles
df['income'].describe(percentiles=[.1, .25, .5, .75, .9])

# value_counts(): Counts observations by category
# ESSENTIAL for categorical variables
df['sex'].value_counts()

# With percentages
df['sex'].value_counts(normalize=True)</code></pre>
  </div>

  <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
    <strong>üí° What the output tells you:</strong>
    <ul style="margin: 8px 0 0 0;">
      <li><code>describe</code> output shows variable <strong>names</strong>, <strong>types</strong> (string vs numeric), and <strong>labels</strong> (human-readable descriptions)</li>
      <li><code>summarize</code> output shows <strong>Obs</strong> (count of non-missing), <strong>Mean</strong>, <strong>Std. Dev.</strong>, <strong>Min</strong>, and <strong>Max</strong></li>
      <li><code>tabulate</code> output shows how many observations fall into each <strong>category</strong></li>
    </ul>
  </div>

  <div class="common-mistakes">
    <h4>Never Manually Edit Data</h4>
    <p>Stata's Data Editor lets you click on cells and change values. <strong>Never do this.</strong> Why? Because there's no record of what you changed. If you need to make changes, do it in code so your work is reproducible.</p>
  </div>

  <h3 id="sample-selection">Step 3: Selecting Your Sample</h3>

  <p>Your dataset might have millions of observations, but your research question might focus on a specific group. For example, if you're studying women's labor force participation, you might want to:</p>

  <ul>
    <li>Keep only women (drop men)</li>
    <li>Keep only working-age adults (ages 25-54)</li>
    <li>Drop observations with missing income</li>
  </ul>

  <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
    <strong>ü§î Predict:</strong> What's the difference between <code>keep if age >= 30</code> and <code>drop if age < 30</code>? Do they give the same result?
  </div>

  <div class="code-block">
    <div class="code-header">
      <div class="code-tabs">
        <button class="code-tab active" data-lang="stata">Stata</button>
        <button class="code-tab" data-lang="r">R</button>
        <button class="code-tab" data-lang="python">Python</button>
      </div>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <pre class="code-content stata active"><code class="language-stata">* ----- SELECTING OBSERVATIONS -----

* Keep only women (where sex == 2)
* "==" means "is equal to" (double equals for comparison)
keep if sex == 2

* Check how many observations remain
count

* Keep only ages 25-54
* "&" means AND - both conditions must be true
keep if age >= 25 & age <= 54

* Alternative: drop observations you don't want
* "|" means OR - either condition triggers the drop
drop if age < 25 | age > 54

* ----- SELECTING VARIABLES -----

* Drop variables you don't need
* This makes your dataset smaller and easier to work with
drop year serial pernum

* Keep only specific variables
keep id age income sex education</code></pre>
    <pre class="code-content r"><code class="language-r"># ----- SELECTING OBSERVATIONS -----

# Keep only women (where sex == 2)
df <- df %>% filter(sex == 2)

# Check how many observations remain
nrow(df)

# Keep only ages 25-54
df <- df %>% filter(age >= 25 & age <= 54)

# Alternative: drop observations you don't want
df <- df %>% filter(!(age < 25 | age > 54))

# ----- SELECTING VARIABLES -----

# Drop variables you don't need
df <- df %>% select(-year, -serial, -pernum)

# Keep only specific variables
df <- df %>% select(id, age, income, sex, education)</code></pre>
    <pre class="code-content python"><code class="language-python"># ----- SELECTING OBSERVATIONS -----

# Keep only women (where sex == 2)
df = df[df['sex'] == 2]

# Check how many observations remain
len(df)

# Keep only ages 25-54
df = df[(df['age'] >= 25) & (df['age'] <= 54)]

# Alternative: drop observations you don't want
df = df[~((df['age'] < 25) | (df['age'] > 54))]

# ----- SELECTING VARIABLES -----

# Drop variables you don't need
df = df.drop(columns=['year', 'serial', 'pernum'])

# Keep only specific variables
df = df[['id', 'age', 'income', 'sex', 'education']]</code></pre>
  </div>

  <div class="key-principle">
    <h4>Check Your Work!</h4>
    <p>After every <code>keep</code> or <code>drop</code>, run <code>count</code> (Stata) or <code>nrow(df)</code> (R) or <code>len(df)</code> (Python) to verify you have the expected number of observations. A common mistake is accidentally dropping everything!</p>
  </div>

  <h3 id="creating-variables">Step 4: Creating New Variables</h3>

  <p>Raw data rarely has exactly the variables you need. You'll often need to create:</p>

  <ul>
    <li><strong>Indicator variables</strong> (0/1): Is this person married? Employed? Over 65?</li>
    <li><strong>Categorical variables</strong>: Group ages into bins (18-24, 25-34, 35-44, etc.)</li>
    <li><strong>Transformed variables</strong>: Log of income, income in thousands, etc.</li>
  </ul>

  <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
    <strong>ü§î Predict:</strong> In Stata, what's the difference between <code>gen married = 1 if marst == 1</code> and <code>gen married = (marst == 1)</code>? What happens to observations where <code>marst != 1</code> in each case?
  </div>

  <div style="background: #ffebee; border-left: 4px solid #f44336; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
    <strong>‚ö†Ô∏è Critical Warning About Indicator Variables:</strong> If you write <code>gen married = 1 if marst == 1</code>, Stata creates <code>married = 1</code> for married people, but <code>married = missing</code> (not 0!) for everyone else. This silently breaks your regressions because observations with missing values get dropped. Always use the two-step method with <code>replace</code>, or the safer one-step method shown below.
  </div>

  <div class="code-block">
    <div class="code-header">
      <div class="code-tabs">
        <button class="code-tab active" data-lang="stata">Stata</button>
        <button class="code-tab" data-lang="r">R</button>
        <button class="code-tab" data-lang="python">Python</button>
      </div>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <pre class="code-content stata active"><code class="language-stata">* ----- INDICATOR VARIABLES (0/1) -----

* Method 1: Two steps (WRONG - creates missing values!)
gen married = 1 if marst == 1
* Problem: married is MISSING (not 0) when marst != 1
tab married, missing  // You'll see missing values

* Method 2: Two steps (CORRECT)
gen married = 1 if marst == 1
replace married = 0 if marst != 1
* Now married is 0 or 1 for everyone

* Method 3: One step (BEST - cleaner code)
gen married = (marst == 1)
* The expression (marst == 1) evaluates to 1 if true, 0 if false

* ----- CATEGORICAL VARIABLES -----

* Group number of children: 0, 1, 2, 3, 4+
gen kids_cat = nchild if nchild <= 4
replace kids_cat = 4 if nchild > 4

* Create dummy variables from categorical
* This creates Kids_1, Kids_2, Kids_3, Kids_4, Kids_5
tab kids_cat, gen(Kids_)

* ----- TRANSFORMED VARIABLES -----

* Log of income (useful for skewed distributions)
* Add 1 to handle zeros (ln(0) is undefined)
gen ln_income = ln(income + 1)

* Income in thousands
gen income_k = income / 1000</code></pre>
    <pre class="code-content r"><code class="language-r"># ----- INDICATOR VARIABLES (0/1) -----

# Method 1: Using ifelse (explicit)
df <- df %>% mutate(married = ifelse(marst == 1, 1, 0))

# Method 2: Using as.integer (cleaner)
df <- df %>% mutate(married = as.integer(marst == 1))

# ----- CATEGORICAL VARIABLES -----

# Group number of children: 0, 1, 2, 3, 4+
df <- df %>% mutate(
  kids_cat = case_when(
    nchild <= 4 ~ nchild,
    nchild > 4 ~ 4
  )
)

# Create dummy variables from categorical
df <- df %>% mutate(
  Kids_0 = as.integer(kids_cat == 0),
  Kids_1 = as.integer(kids_cat == 1),
  Kids_2 = as.integer(kids_cat == 2),
  Kids_3 = as.integer(kids_cat == 3),
  Kids_4 = as.integer(kids_cat == 4)
)

# ----- TRANSFORMED VARIABLES -----

# Log of income
df <- df %>% mutate(ln_income = log(income + 1))

# Income in thousands
df <- df %>% mutate(income_k = income / 1000)</code></pre>
    <pre class="code-content python"><code class="language-python"># ----- INDICATOR VARIABLES (0/1) -----

# Simple boolean comparison (returns True/False, converted to 1/0)
df['married'] = (df['marst'] == 1).astype(int)

# ----- CATEGORICAL VARIABLES -----

# Group number of children: 0, 1, 2, 3, 4+
df['kids_cat'] = df['nchild'].clip(upper=4)

# Create dummy variables from categorical
dummies = pd.get_dummies(df['kids_cat'], prefix='Kids')
df = pd.concat([df, dummies], axis=1)

# ----- TRANSFORMED VARIABLES -----

# Log of income
df['ln_income'] = np.log(df['income'] + 1)

# Income in thousands
df['income_k'] = df['income'] / 1000</code></pre>
  </div>


  <div class="key-principle">
    <h4>Language Comparison</h4>
    <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
      <tr style="background: #e9ecef;">
        <th style="padding: 8px; border: 1px solid #dee2e6;">Task</th>
        <th style="padding: 8px; border: 1px solid #dee2e6;">Stata</th>
        <th style="padding: 8px; border: 1px solid #dee2e6;">R (tidyverse)</th>
        <th style="padding: 8px; border: 1px solid #dee2e6;">Python (pandas)</th>
      </tr>
      <tr>
        <td style="padding: 8px; border: 1px solid #dee2e6;">Create variable</td>
        <td style="padding: 8px; border: 1px solid #dee2e6;"><code>gen x = ...</code></td>
        <td style="padding: 8px; border: 1px solid #dee2e6;"><code>mutate(x = ...)</code></td>
        <td style="padding: 8px; border: 1px solid #dee2e6;"><code>df['x'] = ...</code></td>
      </tr>
      <tr>
        <td style="padding: 8px; border: 1px solid #dee2e6;">Modify variable</td>
        <td style="padding: 8px; border: 1px solid #dee2e6;"><code>replace x = ...</code></td>
        <td style="padding: 8px; border: 1px solid #dee2e6;"><code>mutate(x = ...)</code></td>
        <td style="padding: 8px; border: 1px solid #dee2e6;"><code>df['x'] = ...</code></td>
      </tr>
    </table>
  </div>
</section>

<!-- ============================================================== -->
<section id="organization" class="tutorial-section">
  <h2>Module 2: Project Organization</h2>

  <p>Before we dive into loading data, let's set up a proper project structure. A well-organized project saves hours of confusion later and makes your work reproducible.</p>

  <div style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
    <strong>Why organization matters NOW:</strong> It's much easier to start with good habits than to reorganize a messy project later. The 15 minutes you spend setting this up will save you hours of debugging and searching for files.
  </div>

  <h3 id="folder-structure">The Standard Structure</h3>

  <pre style="background: var(--code-bg); padding: 20px; border-radius: 8px; font-size: 0.9rem; line-height: 1.6;">
my_project/
‚îú‚îÄ‚îÄ master.do              # Runs everything (or master.R / main.py)
‚îú‚îÄ‚îÄ README.md
‚îÇ
‚îú‚îÄ‚îÄ build/                 # Data preparation
‚îÇ   ‚îú‚îÄ‚îÄ input/             # Raw data (NEVER edit these!)
‚îÇ   ‚îú‚îÄ‚îÄ code/              # Scripts to clean data
‚îÇ   ‚îî‚îÄ‚îÄ output/            # Cleaned data
‚îÇ
‚îú‚îÄ‚îÄ analysis/              # Your analysis
‚îÇ   ‚îú‚îÄ‚îÄ code/              # Regression scripts, etc.
‚îÇ   ‚îî‚îÄ‚îÄ output/
‚îÇ       ‚îú‚îÄ‚îÄ tables/
‚îÇ       ‚îî‚îÄ‚îÄ figures/
‚îÇ
‚îî‚îÄ‚îÄ paper/                 # Your writeup
    ‚îî‚îÄ‚îÄ draft.tex</pre>

  <div class="key-principle">
    <h4>The Golden Rule: Raw Data is READ-ONLY</h4>
    <p>Never modify files in your <code>input/</code> folder. If you need to make changes, write code that reads the raw data and saves a cleaned version to <code>output/</code>. This way you can always reproduce your work from scratch.</p>
  </div>

  <h3 id="master-script">The Master Script</h3>

  <p>Your <code>master.do</code> file should run your entire project from start to finish. Anyone should be able to run it and reproduce all your results.</p>

  <div class="code-block">
    <div class="code-header">
      <div class="code-tabs">
        <button class="code-tab active" data-lang="stata">Stata</button>
        <button class="code-tab" data-lang="r">R</button>
        <button class="code-tab" data-lang="python">Python</button>
      </div>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <pre class="code-content stata active"><code class="language-stata">/*==============================================================================
    Master Do-File: My Research Project
    Author: Your Name
    Date: February 2026
==============================================================================*/

clear all
set more off

* Set the project root (CHANGE THIS!)
global root "/Users/yourname/Dropbox/my_project"

* Define paths
global build    "$root/build"
global analysis "$root/analysis"

* Run the build scripts
do "$build/code/01_clean_census.do"
do "$build/code/02_clean_policy.do"
do "$build/code/03_merge.do"

* Run the analysis
do "$analysis/code/01_summary_stats.do"
do "$analysis/code/02_main_regression.do"
do "$analysis/code/03_robustness.do"</code></pre>
    <pre class="code-content r"><code class="language-r">#==============================================================================
#    Master Script: My Research Project
#    Author: Your Name
#    Date: February 2026
#==============================================================================

rm(list = ls())

# Set the project root (CHANGE THIS!)
root <- "/Users/yourname/Dropbox/my_project"

# Define paths
build <- file.path(root, "build")
analysis <- file.path(root, "analysis")

# Run the build scripts
source(file.path(build, "code", "01_clean_census.R"))
source(file.path(build, "code", "02_clean_policy.R"))
source(file.path(build, "code", "03_merge.R"))

# Run the analysis
source(file.path(analysis, "code", "01_summary_stats.R"))
source(file.path(analysis, "code", "02_main_regression.R"))
source(file.path(analysis, "code", "03_robustness.R"))</code></pre>
    <pre class="code-content python"><code class="language-python">"""
Master Script: My Research Project
Author: Your Name
Date: February 2026
"""

import os
import subprocess

# Set the project root (CHANGE THIS!)
ROOT = "/Users/yourname/Dropbox/my_project"

# Define paths
BUILD = os.path.join(ROOT, "build")
ANALYSIS = os.path.join(ROOT, "analysis")

# Run the build scripts
exec(open(os.path.join(BUILD, "code", "01_clean_census.py")).read())
exec(open(os.path.join(BUILD, "code", "02_clean_policy.py")).read())
exec(open(os.path.join(BUILD, "code", "03_merge.py")).read())

# Run the analysis
exec(open(os.path.join(ANALYSIS, "code", "01_summary_stats.py")).read())
exec(open(os.path.join(ANALYSIS, "code", "02_main_regression.py")).read())
exec(open(os.path.join(ANALYSIS, "code", "03_robustness.py")).read())</code></pre>
  </div>

  <div class="key-principle">
    <h4>Number Your Scripts</h4>
    <p>Prefix scripts with numbers (<code>01_</code>, <code>02_</code>, etc.) so it's clear what order they run in. This also keeps them sorted correctly in your file browser.</p>
  </div>

  <!-- Quiz: Project Organization -->
  <div class="section-quiz" style="background: #f8f9fa; border: 2px solid var(--primary); border-radius: 12px; padding: 20px; margin: 24px 0;">
    <h4 style="color: var(--primary); margin-top: 0;">Quick Check: Project Organization</h4>
    <p><strong>Question:</strong> You download census data from the web. Where should you save it?</p>
    <div style="display: flex; gap: 12px; flex-wrap: wrap; margin: 12px 0;">
      <button onclick="checkAnswer(this, true)" style="padding: 8px 16px; border: 1px solid var(--border); border-radius: 6px; background: white; cursor: pointer;">build/input/</button>
      <button onclick="checkAnswer(this, false)" style="padding: 8px 16px; border: 1px solid var(--border); border-radius: 6px; background: white; cursor: pointer;">build/output/</button>
      <button onclick="checkAnswer(this, false)" style="padding: 8px 16px; border: 1px solid var(--border); border-radius: 6px; background: white; cursor: pointer;">analysis/code/</button>
      <button onclick="checkAnswer(this, false)" style="padding: 8px 16px; border: 1px solid var(--border); border-radius: 6px; background: white; cursor: pointer;">paper/</button>
    </div>
    <p class="quiz-feedback" style="display: none; margin-top: 12px; padding: 10px; border-radius: 6px;"></p>
  </div>
</section>

<!-- ============================================================== -->
<section id="module3" class="tutorial-section">
  <h2>Module 3: Reading in Data</h2>

  <p>Real-world data comes in many formats: CSV files from websites, Excel spreadsheets from collaborators, Stata files from data archives. This module teaches you how to get data into your software.</p>

  <h3 id="importing-csv">Importing CSV Files</h3>

  <p>CSV (Comma-Separated Values) is the most common format for sharing data. It's just a text file where values are separated by commas.</p>

  <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
    <strong>üí° What's in a CSV file?</strong> Open one in a text editor (not Excel) and you'll see something like:
    <pre style="background: #f5f5f5; padding: 12px; margin: 8px 0; font-size: 0.85rem;">name,age,income
Alice,32,50000
Bob,45,75000
Carol,28,42000</pre>
    The first row is usually variable names. Each subsequent row is one observation.
  </div>

  <div class="code-block">
    <div class="code-header">
      <div class="code-tabs">
        <button class="code-tab active" data-lang="stata">Stata</button>
        <button class="code-tab" data-lang="r">R</button>
        <button class="code-tab" data-lang="python">Python</button>
      </div>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <pre class="code-content stata active"><code class="language-stata">* Import CSV with first row as variable names
import delimited "mydata.csv", varnames(1) clear

* Immediately check what you got
browse       // Look at the data
describe     // Check variable types
summarize    // Check value ranges

* Common issue: numbers imported as strings
* WHY? If your CSV has a comma in any number (like '1,234'), Stata reads
* the entire column as text. Same if there's any non-numeric character
* ('$50', 'N/A'). You'll know this happened if `summarize income` says
* 'no observations' or shows nothing.
* Fix by destringing (converting to numeric)
destring income, replace</code></pre>
    <pre class="code-content r"><code class="language-r"># Import CSV (read_csv from tidyverse is best)
df <- read_csv("mydata.csv")

# Immediately check what you got
glimpse(df)    # Check variable types
summary(df)    # Check value ranges

# Note: read_csv automatically detects types
# It's smarter than base R's read.csv()</code></pre>
    <pre class="code-content python"><code class="language-python"># Import CSV
df = pd.read_csv("mydata.csv")

# Immediately check what you got
df.head()     # Look at first rows
df.info()     # Check variable types
df.describe() # Check value ranges

# Note: pandas usually detects types correctly
# You can specify types if needed:
# df = pd.read_csv("mydata.csv", dtype={'id': str})</code></pre>
  </div>

  <h3 id="importing-stata">Importing Stata Files</h3>

  <p>Many economics datasets are distributed as Stata .dta files. These are convenient because they preserve variable labels and value labels.</p>

  <div class="code-block">
    <div class="code-header">
      <div class="code-tabs">
        <button class="code-tab active" data-lang="stata">Stata</button>
        <button class="code-tab" data-lang="r">R</button>
        <button class="code-tab" data-lang="python">Python</button>
      </div>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <pre class="code-content stata active"><code class="language-stata">* Open Stata file
use "mydata.dta", clear

* Open specific variables only (saves memory for large files)
use age income education using "mydata.dta", clear

* Open only observations meeting a condition
use if age >= 25 using "mydata.dta", clear</code></pre>
    <pre class="code-content r"><code class="language-r"># Need the haven package
pacman::p_load(haven)

# Read Stata file
df <- read_dta("mydata.dta")

# Note: haven preserves variable labels
# Access them with:
attr(df$income, "label")</code></pre>
    <pre class="code-content python"><code class="language-python"># pandas can read Stata files directly
df = pd.read_stata("mydata.dta")

# Note: pandas preserves variable labels
# Access them with:
df.columns.to_list()  # Variable names</code></pre>
  </div>

  <h3 id="saving">Saving Your Data</h3>

  <p>After cleaning and creating variables, save your work so you don't have to redo it.</p>

  <div class="code-block">
    <div class="code-header">
      <div class="code-tabs">
        <button class="code-tab active" data-lang="stata">Stata</button>
        <button class="code-tab" data-lang="r">R</button>
        <button class="code-tab" data-lang="python">Python</button>
      </div>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <pre class="code-content stata active"><code class="language-stata">* Save as Stata file
save "mydata_clean.dta", replace

* Export as CSV
export delimited "mydata_clean.csv", replace</code></pre>
    <pre class="code-content r"><code class="language-r"># Save as RDS (R's native format)
saveRDS(df, "mydata_clean.rds")

# Save as Stata file
write_dta(df, "mydata_clean.dta")

# Save as CSV
write_csv(df, "mydata_clean.csv")</code></pre>
    <pre class="code-content python"><code class="language-python"># Save as pickle (Python's native format)
df.to_pickle("mydata_clean.pkl")

# Save as Stata file
df.to_stata("mydata_clean.dta")

# Save as CSV
df.to_csv("mydata_clean.csv", index=False)</code></pre>
  </div>
</section>

<!-- ============================================================== -->
<section id="quiz" class="tutorial-section">
  <h2>Practice Quiz</h2>

  <p>Test your understanding with these questions:</p>

  <div class="quiz-question" style="background: var(--bg-subtle); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin: 16px 0;">
    <p><strong>Q1:</strong> In Stata, what's wrong with this code?</p>
    <pre style="background: #f5f5f5; padding: 12px; border-radius: 4px;">gen employed = 1 if empstat == 1</pre>
    <details style="margin-top: 12px;">
      <summary style="cursor: pointer; color: var(--primary); font-weight: 500;">Show Answer</summary>
      <p style="margin-top: 8px;">This creates <code>employed = 1</code> for employed people, but <code>employed = missing</code> for everyone else (not 0!). You need either:<br>
      <code>gen employed = 1 if empstat == 1</code><br>
      <code>replace employed = 0 if empstat != 1</code><br>
      Or: <code>gen employed = (empstat == 1)</code></p>
    </details>
  </div>

  <div class="quiz-question" style="background: var(--bg-subtle); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin: 16px 0;">
    <p><strong>Q2:</strong> You download census data from the web. Where should you save it in your project folder?</p>
    <details style="margin-top: 12px;">
      <summary style="cursor: pointer; color: var(--primary); font-weight: 500;">Show Answer</summary>
      <p style="margin-top: 8px;"><strong>build/input/</strong>. Raw data goes in the input folder. Never modify files in this folder‚Äîif you need to make changes, write code that reads the raw data and saves a cleaned version to <code>build/output/</code>.</p>
    </details>
  </div>

  <div class="quiz-question" style="background: var(--bg-subtle); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin: 16px 0;">
    <p><strong>Q3:</strong> You import a CSV and the <code>income</code> variable shows up as a string instead of a number. How do you fix this in Stata?</p>
    <details style="margin-top: 12px;">
      <summary style="cursor: pointer; color: var(--primary); font-weight: 500;">Show Answer</summary>
      <p style="margin-top: 8px;">Use <code>destring income, replace</code> to convert the string to a numeric variable. This is a common issue when CSVs have numbers formatted with commas or other text characters.</p>
    </details>
  </div>

  <div class="quiz-question" style="background: var(--bg-subtle); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin: 16px 0;">
    <p><strong>Q4:</strong> You run <code>keep if age >= 18</code> but then <code>count</code> shows 0 observations. What probably happened?</p>
    <details style="margin-top: 12px;">
      <summary style="cursor: pointer; color: var(--primary); font-weight: 500;">Show Answer</summary>
      <p style="margin-top: 8px;">Most likely, <code>age</code> is stored as a string (text), not a number. The comparison <code>age >= 18</code> doesn't work as expected on strings. Use <code>destring age, replace</code> first to convert it to numeric.</p>
    </details>
  </div>
</section>
